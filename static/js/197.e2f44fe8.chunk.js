"use strict";(self.webpackChunkvulpes_storage=self.webpackChunkvulpes_storage||[]).push([[197],{3197:function(e,t,n){n.r(t),n.d(t,{default:function(){return y}});var r=n(5861),c=n(9439),o=n(4687),i=n.n(o),a=n(2791),s={container:"ProductByBarcode_container__I+StQ",videoArea:"ProductByBarcode_videoArea__DWxuM",hide:"ProductByBarcode_hide__MRSzl",modalArea:"ProductByBarcode_modalArea__aleCt",modalImage:"ProductByBarcode_modalImage__P9h42",button:"ProductByBarcode_button__BBdqD"},l=n(1089),u=n(5612),d=n(4420),h=n(9654),f=n(4723),p=n(3439),m=n(7948),v=n.n(m),x="PopUp_modalCloseButton__m06-1",j="PopUp_menuIcon__5-11v",g=n(184),_=function(e){var t=e.isOpen,n=e.close,r=e.body;return(0,g.jsxs)(v(),{isOpen:t,onRequestClose:n,style:{overlay:{backgroundColor:"rgba(9, 9, 9, 0.75)",position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center"},content:{position:"relative",top:"auto",left:"auto",right:"auto",bottom:"auto",minWidth:"300px",maxWidth:"80%",width:"auto",maxHeight:"80%",padding:"50px 20px",borderRadius:"12px",border:"2px solid black",backgroundColor:"FFF",transition:"top 0.3s ease-in-out"}},ariaHideApp:!1,children:[(0,g.jsx)("button",{className:x,type:"button",onClick:n,children:(0,g.jsx)("svg",{className:j,children:(0,g.jsx)("use",{href:"".concat(p.Z,"#icon-close-circle")})})}),r]})},b=function(){var e,t,n=(0,d.I0)(),o=(0,d.v9)(h.K),p=(0,a.useRef)(null),m=(0,a.useRef)(null),v=(0,a.useState)([]),x=(0,c.Z)(v,2),j=x[0],b=x[1],B=(0,a.useState)(""),y=(0,c.Z)(B,2),k=y[0],C=y[1],I=(0,a.useState)(null),A=(0,c.Z)(I,2),N=A[0],S=A[1],P=(0,a.useState)(""),R=(0,c.Z)(P,2),Z=R[0],w=R[1],F=(0,a.useState)(!1),D=(0,c.Z)(F,2),U=D[0],q=D[1],H=(0,a.useState)(!1),E=(0,c.Z)(H,2),M=E[0],O=E[1],W=(0,a.useRef)(new l.BrowserMultiFormatReader);(0,a.useEffect)((function(){n((0,f.h)())}),[n]),(0,a.useEffect)((function(){var e=W.current;return e.listVideoInputDevices().then((function(e){b(e),e.length>0&&C(e[0].deviceId)})),function(){e.reset()}}),[]);var K=function(){O(!1),W.current.reset(),S(null)};return(0,a.useEffect)((function(){o&&o.article&&(console.log("active item changed"),K(),q(!0)),null===o&&(q(!0),K())}),[o,N]),(0,g.jsxs)("div",{className:s.container,children:[(0,g.jsx)("div",{className:s.scanBlock,children:(0,g.jsx)("video",{ref:p,className:M?s.videoArea:s.hide})}),(0,g.jsxs)("div",{className:s.buttonsBlock,children:[(0,g.jsx)("button",{className:s.button,onClick:function(){O(!0),k&&W.current.decodeFromVideoDevice(k,p.current,function(){var e=(0,r.Z)(i().mark((function e(t,r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t)try{w(t.text),n((0,u.BD)(t.text))}catch(r){console.error(r),S({error:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443"})}case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},children:"Start"}),(0,g.jsx)("button",{className:s.button,onClick:K,children:"Reset"})]}),(0,g.jsxs)("div",{className:s.scanBlock,children:[(0,g.jsx)("label",{htmlFor:"sourceSelect",children:"Change video source:"}),(0,g.jsx)("select",{ref:m,id:"sourceSelect",value:k,onChange:function(e){return C(e.target.value)},children:j.map((function(e){return(0,g.jsx)("option",{value:e.deviceId,children:e.label||"Camera ".concat(e.deviceId)},e.deviceId)}))})]}),(0,g.jsx)(_,{isOpen:U,close:function(){q(!1)},body:o&&o.article?(0,g.jsxs)("div",{className:s.modalArea,children:[Array.isArray(o.images)&&o.images.length>0?(0,g.jsx)("img",{className:s.modalImage,alt:"scanned product",src:o.images[0]}):(0,g.jsx)("p",{children:"No image"}),(0,g.jsx)("p",{children:"".concat((null===(e=o.name)||void 0===e?void 0:e.UA)||"\u0411\u0435\u0437 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f"," (").concat(o.article,")")}),(0,g.jsx)("p",{children:null!==(t=o.price)&&void 0!==t&&t.UAH?"".concat(o.price.UAH," \u0433\u0440\u043d."):"\u0426\u0435\u043d\u0430 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u0430"})]}):null===o?(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{children:"\u0422\u043e\u0432\u0430\u0440 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d!"}),(0,g.jsxs)("p",{children:["\u0428\u0442\u0440\u0438\u0445\u043a\u043e\u0434: ",Z]})]}):null})]})},B=n(3050);function y(){return(0,g.jsx)(B.B6,{children:(0,g.jsxs)("div",{children:[(0,g.jsx)(B.ql,{children:(0,g.jsx)("title",{children:"Scanner"})}),(0,g.jsx)(b,{})]})})}},9654:function(e,t,n){n.d(t,{K:function(){return c},q:function(){return r}});var r=function(e){return e.products.items},c=function(e){return e.products.activeItem}}}]);
//# sourceMappingURL=197.e2f44fe8.chunk.js.map