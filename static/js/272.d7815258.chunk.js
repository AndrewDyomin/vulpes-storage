"use strict";(self.webpackChunkvulpes_storage=self.webpackChunkvulpes_storage||[]).push([[272],{1448:function(e,t,n){n.d(t,{m:function(){return m}});var c=n(5861),r=n(9439),a=n(4687),o=n.n(a),i=n(2791),s={container:"BarcodeScanner_container__zdOxt",scanBlock:"BarcodeScanner_scanBlock__MR5A0",videoArea:"BarcodeScanner_videoArea__AA2r4",hide:"BarcodeScanner_hide__qqbBN",modalArea:"BarcodeScanner_modalArea__9PFQN",modalImage:"BarcodeScanner_modalImage__0uUA6",button:"BarcodeScanner_button__kNses"},u=n(1089),l=n(5612),d=n(4420),p=n(9654),v=n(9230),f=n(184),m=(0,i.forwardRef)((function(e,t){var n=e.setLastResult,a=(0,v.$G)().t,m=(0,d.I0)(),h=(0,d.v9)(p.K),x=(0,i.useRef)(null),_=(0,i.useRef)(null),j=(0,i.useState)([]),g=(0,r.Z)(j,2),b=g[0],N=g[1],B=(0,i.useState)(""),S=(0,r.Z)(B,2),k=S[0],A=S[1],y=(0,i.useState)(null),C=(0,r.Z)(y,2),R=C[0],Z=C[1],I=(0,i.useState)(!1),P=(0,r.Z)(I,2),w=P[0],O=P[1],F=(0,i.useRef)(new u.BrowserMultiFormatReader);(0,i.useEffect)((function(){var e=F.current;return navigator.mediaDevices.getUserMedia({video:!0}).then((function(){return e.listVideoInputDevices()})).then((function(e){N(e),e.length>0&&A(e[0].deviceId)})).catch((function(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u043a\u0430\u043c\u0435\u0440\u0435:",e)})),function(){e.reset()}}),[]),(0,i.useImperativeHandle)(t,(function(){return{startScan:M,stopScan:D}}));var M=function(){O(!0),k&&F.current.decodeFromVideoDevice(k,x.current,function(){var e=(0,c.Z)(o().mark((function e(t,c){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t)try{"H"!==(null===t||void 0===t?void 0:t.text[0])&&(n(t.text),m((0,l.BD)(t.text)))}catch(c){console.error(c),Z({error:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443"})}case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},D=function(){O(!1),F.current.reset(),Z(null)};return(0,i.useEffect)((function(){h&&h.article&&D(),null===h&&D()}),[h,R]),(0,f.jsxs)("div",{className:s.container,children:[(0,f.jsx)("div",{className:s.scanBlock,children:(0,f.jsx)("video",{ref:x,className:w?s.videoArea:s.hide})}),(0,f.jsxs)("div",{className:s.buttonsBlock,children:[(0,f.jsx)("button",{className:s.button,onClick:M,children:a("start")}),(0,f.jsx)("button",{className:s.button,onClick:D,children:a("reset")})]}),(0,f.jsxs)("div",{className:s.scanBlock,children:[(0,f.jsxs)("label",{htmlFor:"sourceSelect",children:[a("change video source"),":"]}),(0,f.jsx)("select",{ref:_,id:"sourceSelect",value:k,onChange:function(e){return A(e.target.value)},children:b.map((function(e){return(0,f.jsx)("option",{value:e.deviceId,children:e.label||"Camera ".concat(e.deviceId)},e.deviceId)}))})]})]})}))},381:function(e,t,n){n.d(t,{N:function(){return u}});var c=n(3439),r=n(7948),a=n.n(r),o="PopUp_modalCloseButton__m06-1",i="PopUp_menuIcon__5-11v",s=n(184),u=function(e){var t=e.isOpen,n=e.close,r=e.body;return(0,s.jsxs)(a(),{isOpen:t,onRequestClose:n,style:{overlay:{backgroundColor:"rgba(9, 9, 9, 0.75)",position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center"},content:{position:"relative",top:"auto",left:"auto",right:"auto",bottom:"auto",minWidth:"300px",maxWidth:"80%",width:"auto",maxHeight:"80%",padding:"50px 20px",borderRadius:"12px",border:"2px solid black",backgroundColor:"FFF",transition:"top 0.3s ease-in-out"}},ariaHideApp:!1,children:[(0,s.jsx)("button",{className:o,type:"button",onClick:n,children:(0,s.jsx)("svg",{className:i,children:(0,s.jsx)("use",{href:"".concat(c.Z,"#icon-close-circle")})})}),r]})}},5272:function(e,t,n){n.r(t),n.d(t,{default:function(){return Z}});var c=n(7762),r=n(5861),a=n(3433),o=n(9439),i=n(4687),s=n.n(i),u={listWrapper:"ReceiveProducts_listWrapper__N2GN-",controlArea:"ReceiveProducts_controlArea__P2cGp",modeButtons:"ReceiveProducts_modeButtons__LxlKN",addButton:"ReceiveProducts_addButton__L8NpM",selectButton:"ReceiveProducts_selectButton__HSJaU",activeSelect:"ReceiveProducts_activeSelect__O6tG-",addArtBtn:"ReceiveProducts_addArtBtn__gC-vH",modalArea:"ReceiveProducts_modalArea__ZhT54",modalImage:"ReceiveProducts_modalImage__FjsSE",button:"ReceiveProducts_button__tfewH",countArea:"ReceiveProducts_countArea__4pPdx",countInput:"ReceiveProducts_countInput__2Ro+s",countAddBtn:"ReceiveProducts_countAddBtn__7mfDc",addListArea:"ReceiveProducts_addListArea__7021d",list:"ReceiveProducts_list__E5-bs",listItem:"ReceiveProducts_listItem__aBnI8",selectedItem:"ReceiveProducts_selectedItem__AMUB2",link:"ReceiveProducts_link__p1k9r",count:"ReceiveProducts_count__46Tcq",notFoundArea:"ReceiveProducts_notFoundArea__ykjPD",combineButton:"ReceiveProducts_combineButton__YW7YP"},l=n(4270),d=n(9536),p=n(6546),v=n(478),f=n(2791),m=n(1448),h=n(9654),x=n(8019),_=n(4723),j=n(4217),g=n(9136),b=n(4420),N=n(381),B=n(5218),S=n(1087),k=n(9230),A=n(5294),y=n(184),C=function(){var e,t,n=(0,k.$G)().t,i=(0,b.I0)(),C=(0,b.v9)(h.K),R=(0,b.v9)(j.dy),Z=(0,b.v9)(x.N),I=(0,b.v9)(x.s),P=(0,f.useRef)(),w=(0,f.useState)(!1),O=(0,o.Z)(w,2),F=O[0],M=O[1],D=(0,f.useState)(!1),L=(0,o.Z)(D,2),E=L[0],H=L[1],z=(0,f.useState)([]),U=(0,o.Z)(z,2),W=U[0],q=U[1],G=(0,f.useState)(!1),V=(0,o.Z)(G,2),K=V[0],Y=V[1],$=(0,f.useState)(""),T=(0,o.Z)($,2),J=T[0],Q=T[1],X=(0,f.useState)(),ee=(0,o.Z)(X,2),te=ee[0],ne=ee[1],ce=(0,f.useState)([]),re=(0,o.Z)(ce,2),ae=re[0],oe=re[1],ie=(0,f.useState)(),se=(0,o.Z)(ie,2),ue=se[0],le=se[1],de=(0,f.useState)(),pe=(0,o.Z)(de,2),ve=pe[0],fe=pe[1],me=function(e){"add"===e&&M(!F),"select"===e&&(H(!E),q([]))},he=function(){var e=(0,r.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.Z.post("/inventory-check/combine",{array:W});case 2:me("select"),i((0,g.Lo)());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),xe=function(){Y(!1),fe(!1)},_e=function(){var e;oe((function(e){return[].concat((0,a.Z)(e),[{article:ue||C.article,count:te}])})),xe(),le(),ne(),i((0,_.h)()),null===(e=P.current)||void 0===e||e.startScan()},je=function(){for(var e=new Date,t=e.getDate()<10?"0"+e.getDate():e.getDate(),n=e.getMonth()<9?"0"+(e.getMonth()+1):e.getMonth()+1,c=e.getFullYear(),r="".concat(t,".").concat(n,".").concat(c),a=0,o=r,i=I.map((function(e){return e.name}));i.includes(o);)a+=1,o="".concat(r," (").concat(a,")");return o},ge=function(e){var t,n=0,r=(0,c.Z)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n+=Number(a.count)}}catch(o){r.e(o)}finally{r.f()}return n};return(0,f.useEffect)((function(){""!==J&&(C&&C.article&&Y(!0),null===C&&Y(!0))}),[C,J]),(0,f.useEffect)((function(){F||i((0,g.Lo)())}),[F,i]),(0,y.jsxs)(y.Fragment,{children:[!F&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:u.modeButtons,children:[(0,y.jsx)("button",{className:u.addButton,onClick:function(){return me("add")},children:(0,y.jsx)(d.Z,{fill:"transparent",fontSize:"large"})}),"owner"===R.role&&(0,y.jsx)("button",{className:"".concat(u.addButton," ").concat(u.selectButton," ").concat(E&&u.activeSelect),onClick:function(){return me("select")},children:(0,y.jsx)(v.Z,{fill:"transparent",fontSize:"large"})})]}),(0,y.jsxs)("div",{children:[Z&&(0,y.jsx)("div",{className:u.listWrapper,children:(0,y.jsx)(l.Z,{color:"#c04545"})}),!Z&&I&&(0,y.jsxs)("div",{className:u.listWrapper,children:[(0,y.jsx)("ul",{className:u.list,children:I.map((function(e,t){return(0,y.jsx)("li",{className:"".concat(u.listItem," ").concat(W.includes(e._id)&&u.selectedItem),children:E?(0,y.jsxs)("div",{className:u.link,onClick:function(){return function(e){W.includes(I[e]._id)&&q((function(t){return(0,a.Z)(t.filter((function(t){return t!==I[e]._id})))})),W.includes(I[e]._id)||q((function(t){return[].concat((0,a.Z)(t),[I[e]._id])}))}(t)},children:[(0,y.jsx)("p",{children:e.name}),(0,y.jsxs)("p",{className:u.count,children:[ge(e.items),n("pcs"),"."]})]}):(0,y.jsxs)(S.rU,{className:u.link,to:"/get-products-in/".concat(e._id),children:[(0,y.jsx)("p",{children:e.name}),(0,y.jsxs)("p",{className:u.count,children:[ge(e.items),n("pcs"),"."]})]})},t)}))}),"owner"===R.role&&E&&(null===W||void 0===W?void 0:W.length)>1&&(0,y.jsx)("div",{children:(0,y.jsx)("button",{onClick:he,className:"".concat(u.button," ").concat(u.combineButton),children:n("combine")})})]})]})]}),F&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("button",{className:"".concat(u.addButton," ").concat(u.closeButton),onClick:function(){return me("add")},children:(0,y.jsx)(p.Z,{fill:"transparent",fontSize:"large"})}),(0,y.jsxs)("div",{className:u.controlArea,children:[(0,y.jsx)(m.m,{setLastResult:Q,ref:P}),(0,y.jsx)("button",{className:"".concat(u.addButton," ").concat(u.addArtBtn),onClick:function(){return fe(!0)},children:(0,y.jsx)(d.Z,{fill:"transparent",fontSize:"large"})})]}),C&&C.article&&(0,y.jsx)("button",{className:u.button,onClick:function(){return Y(!0)},children:n("last scan")}),(null===ae||void 0===ae?void 0:ae.length)>0&&(0,y.jsxs)("div",{className:u.addListArea,children:[(0,y.jsx)("p",{children:je()}),(0,y.jsx)("ul",{className:u.list,children:ae.map((function(e,t){return(0,y.jsxs)("li",{className:u.listItem,children:[(0,y.jsxs)("p",{children:[n("article"),": ",e.article]}),(0,y.jsxs)("p",{className:u.count,children:[n("count"),": ",e.count,n("pcs"),"."]})]},t)}))}),(0,y.jsx)("button",{className:u.button,onClick:function(){var e={name:je(),items:ae};try{i((0,g.DY)(e)),M(!1),oe([])}catch(t){B.ZP.error(t)}},children:n("save")})]}),(0,y.jsx)(N.N,{isOpen:K,close:xe,body:C&&C.article?(0,y.jsxs)("div",{className:u.modalArea,children:[Array.isArray(C.images)&&C.images.length>0?(0,y.jsx)("img",{className:u.modalImage,alt:"scanned product",src:C.images[0]}):(0,y.jsx)("p",{children:"No image"}),(0,y.jsx)("p",{children:"".concat((null===(e=C.name)||void 0===e?void 0:e.UA)||n("no name")," (").concat(C.article,")")}),(0,y.jsx)("p",{children:null!==(t=C.price)&&void 0!==t&&t.UAH?"".concat(C.price.UAH," \u0433\u0440\u043d."):"\u0426\u0435\u043d\u0430 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u0430"}),(0,y.jsxs)("div",{className:u.countArea,children:[(0,y.jsx)("input",{placeholder:n("count"),onChange:function(e){return ne(e.target.value)},defaultValue:te,className:u.countInput}),(0,y.jsx)("button",{className:u.countAddBtn,onClick:_e,children:n("add")})]})]}):null===C?(0,y.jsxs)("div",{children:[(0,y.jsxs)("p",{children:[n("product not found"),"!"]}),(0,y.jsxs)("p",{children:["barcode",": ",J]}),(0,y.jsxs)("div",{className:u.countArea,children:[(0,y.jsx)("input",{placeholder:n("article"),onChange:function(e){return le(e.target.value)},defaultValue:ue,className:u.countInput}),(0,y.jsx)("input",{placeholder:n("count"),onChange:function(e){return ne(e.target.value)},defaultValue:te,className:u.countInput}),(0,y.jsx)("button",{className:u.countAddBtn,onClick:_e,children:n("add")})]})]}):null}),(0,y.jsx)(N.N,{isOpen:ve,close:xe,body:(0,y.jsxs)("div",{className:"".concat(u.countArea," ").concat(u.notFoundArea),children:[(0,y.jsx)("input",{placeholder:n("article"),onChange:function(e){return le(e.target.value)},className:u.countInput}),(0,y.jsx)("input",{placeholder:n("count"),onChange:function(e){return ne(e.target.value)},type:"number",className:u.countInput}),(0,y.jsx)("button",{className:u.countAddBtn,onClick:_e,children:n("add")})]})})]})]})},R=n(3050);function Z(){var e=(0,k.$G)().t;return(0,y.jsx)(R.B6,{children:(0,y.jsxs)("div",{children:[(0,y.jsx)(R.ql,{children:(0,y.jsx)("title",{children:e("add products")})}),(0,y.jsx)(C,{})]})})}},9654:function(e,t,n){n.d(t,{K:function(){return r},q:function(){return c}});var c=function(e){return e.products.items},r=function(e){return e.products.activeItem}},8019:function(e,t,n){n.d(t,{N:function(){return r},s:function(){return c}});var c=function(e){return e.receive.items},r=function(e){return e.receive.isLoading}},4270:function(e,t,n){n.d(t,{Z:function(){return u}});var c=n(2791),r={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function a(e){if("number"===typeof e)return{value:e,unit:"px"};var t,n=(e.match(/^[0-9.]*/)||"").toString();t=n.includes(".")?parseFloat(n):parseInt(n,10);var c=(e.match(/[^0-9]*$/)||"").toString();return r[c]?{value:t,unit:c}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(t,"px.")),{value:t,unit:"px"})}var o=function(){return o=Object.assign||function(e){for(var t,n=1,c=arguments.length;n<c;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},o.apply(this,arguments)},i=function(e,t){var n={};for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&t.indexOf(c)<0&&(n[c]=e[c]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(c=Object.getOwnPropertySymbols(e);r<c.length;r++)t.indexOf(c[r])<0&&Object.prototype.propertyIsEnumerable.call(e,c[r])&&(n[c[r]]=e[c[r]])}return n},s=function(e,t,n){var c="react-spinners-".concat(e,"-").concat(n);if("undefined"==typeof window||!window.document)return c;var r=document.createElement("style");document.head.appendChild(r);var a=r.sheet,o="\n    @keyframes ".concat(c," {\n      ").concat(t,"\n    }\n  ");return a&&a.insertRule(o,0),c}("ClockLoader","100% { transform: rotate(360deg) }","rotate");var u=function(e){var t=e.loading,n=void 0===t||t,r=e.color,u=void 0===r?"#000000":r,l=e.speedMultiplier,d=void 0===l?1:l,p=e.cssOverride,v=void 0===p?{}:p,f=e.size,m=void 0===f?50:f,h=i(e,["loading","color","speedMultiplier","cssOverride","size"]),x=a(m),_=x.value,j=x.unit,g=o({display:"inherit",position:"relative",width:"".concat(_).concat(j),height:"".concat(_).concat(j),backgroundColor:"transparent",boxShadow:"inset 0px 0px 0px 2px ".concat(u),borderRadius:"50%"},v),b={position:"absolute",backgroundColor:u,width:"".concat(_/3,"px"),height:"2px",top:"".concat(_/2-1,"px"),left:"".concat(_/2-1,"px"),transformOrigin:"1px 1px",animation:"".concat(s," ").concat(8/d,"s linear infinite")},N={position:"absolute",backgroundColor:u,width:"".concat(_/2.4,"px"),height:"2px",top:"".concat(_/2-1,"px"),left:"".concat(_/2-1,"px"),transformOrigin:"1px 1px",animation:"".concat(s," ").concat(2/d,"s linear infinite")};return n?c.createElement("span",o({style:g},h),c.createElement("span",{style:N}),c.createElement("span",{style:b})):null}},9536:function(e,t,n){var c=n(6811),r=n(184);t.Z=(0,c.Z)((0,r.jsx)("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"AddCircleOutline")},478:function(e,t,n){var c=n(6811),r=n(184);t.Z=(0,c.Z)((0,r.jsx)("path",{d:"M16.59 7.58 10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"CheckCircleOutline")},6546:function(e,t,n){var c=n(6811),r=n(184);t.Z=(0,c.Z)((0,r.jsx)("path",{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"HighlightOff")}}]);
//# sourceMappingURL=272.d7815258.chunk.js.map