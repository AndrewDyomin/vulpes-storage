"use strict";(self.webpackChunkvulpes_storage=self.webpackChunkvulpes_storage||[]).push([[938],{381:function(e,t,n){n.d(t,{N:function(){return l}});var r=n(3439),c=n(7948),a=n.n(c),o="PopUp_modalCloseButton__m06-1",i="PopUp_menuIcon__5-11v",s=n(184),l=function(e){var t=e.isOpen,n=e.close,c=e.body;return(0,s.jsxs)(a(),{isOpen:t,onRequestClose:n,style:{overlay:{backgroundColor:"rgba(9, 9, 9, 0.75)",position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center"},content:{position:"relative",top:"auto",left:"auto",right:"auto",bottom:"auto",minWidth:"300px",maxWidth:"80%",width:"auto",maxHeight:"80%",padding:"50px 20px",borderRadius:"12px",border:"2px solid black",backgroundColor:"FFF",transition:"top 0.3s ease-in-out"}},ariaHideApp:!1,children:[(0,s.jsx)("button",{className:o,type:"button",onClick:n,children:(0,s.jsx)("svg",{className:i,children:(0,s.jsx)("use",{href:"".concat(r.Z,"#icon-close-circle")})})}),c]})}},9938:function(e,t,n){n.r(t),n.d(t,{default:function(){return R}});var r=n(7762),c=n(3433),a=n(9439),o={listWrapper:"InventoryCheckList_listWrapper__ZmVhv",addButton:"InventoryCheckList_addButton__GF6NK",modalArea:"InventoryCheckList_modalArea__P1CSU",modalImage:"InventoryCheckList_modalImage__eAl2A",button:"InventoryCheckList_button__apVqB",countArea:"InventoryCheckList_countArea__B0ih7",countInput:"InventoryCheckList_countInput__dfopf",countAddBtn:"InventoryCheckList_countAddBtn__TlZrB",addListArea:"InventoryCheckList_addListArea__p0QVr",list:"InventoryCheckList_list__J6D9u",listItem:"InventoryCheckList_listItem__UnQTL",count:"InventoryCheckList_count__So13G"},i=n(2791),s={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function l(e){if("number"===typeof e)return{value:e,unit:"px"};var t,n=(e.match(/^[0-9.]*/)||"").toString();t=n.includes(".")?parseFloat(n):parseInt(n,10);var r=(e.match(/[^0-9]*$/)||"").toString();return s[r]?{value:t,unit:r}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(t,"px.")),{value:t,unit:"px"})}var u=function(){return u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var c in t=arguments[n])Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c]);return e},u.apply(this,arguments)},d=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var c=0;for(r=Object.getOwnPropertySymbols(e);c<r.length;c++)t.indexOf(r[c])<0&&Object.prototype.propertyIsEnumerable.call(e,r[c])&&(n[r[c]]=e[r[c]])}return n},p=function(e,t,n){var r="react-spinners-".concat(e,"-").concat(n);if("undefined"==typeof window||!window.document)return r;var c=document.createElement("style");document.head.appendChild(c);var a=c.sheet,o="\n    @keyframes ".concat(r," {\n      ").concat(t,"\n    }\n  ");return a&&a.insertRule(o,0),r}("ClockLoader","100% { transform: rotate(360deg) }","rotate");var h=function(e){var t=e.loading,n=void 0===t||t,r=e.color,c=void 0===r?"#000000":r,a=e.speedMultiplier,o=void 0===a?1:a,s=e.cssOverride,h=void 0===s?{}:s,v=e.size,m=void 0===v?50:v,f=d(e,["loading","color","speedMultiplier","cssOverride","size"]),x=l(m),g=x.value,j=x.unit,_=u({display:"inherit",position:"relative",width:"".concat(g).concat(j),height:"".concat(g).concat(j),backgroundColor:"transparent",boxShadow:"inset 0px 0px 0px 2px ".concat(c),borderRadius:"50%"},h),b={position:"absolute",backgroundColor:c,width:"".concat(g/3,"px"),height:"2px",top:"".concat(g/2-1,"px"),left:"".concat(g/2-1,"px"),transformOrigin:"1px 1px",animation:"".concat(p," ").concat(8/o,"s linear infinite")},y={position:"absolute",backgroundColor:c,width:"".concat(g/2.4,"px"),height:"2px",top:"".concat(g/2-1,"px"),left:"".concat(g/2-1,"px"),transformOrigin:"1px 1px",animation:"".concat(p," ").concat(2/o,"s linear infinite")};return n?i.createElement("span",u({style:_},f),i.createElement("span",{style:y}),i.createElement("span",{style:b})):null},v=n(6811),m=n(184),f=(0,v.Z)((0,m.jsx)("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"AddCircleOutline"),x=(0,v.Z)((0,m.jsx)("path",{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"HighlightOff"),g=n(5861),j=n(4687),_=n.n(j),b={container:"BarcodeScanner_container__zdOxt",videoArea:"BarcodeScanner_videoArea__AA2r4",hide:"BarcodeScanner_hide__qqbBN",modalArea:"BarcodeScanner_modalArea__9PFQN",modalImage:"BarcodeScanner_modalImage__0uUA6",button:"BarcodeScanner_button__kNses"},y=n(1089),C=n(5612),k=n(4420),I=n(9654),N=function(e){var t=e.setLastResult,n=(0,k.I0)(),r=(0,k.v9)(I.K),c=(0,i.useRef)(null),o=(0,i.useRef)(null),s=(0,i.useState)([]),l=(0,a.Z)(s,2),u=l[0],d=l[1],p=(0,i.useState)(""),h=(0,a.Z)(p,2),v=h[0],f=h[1],x=(0,i.useState)(null),j=(0,a.Z)(x,2),N=j[0],A=j[1],S=(0,i.useState)(!1),B=(0,a.Z)(S,2),w=B[0],L=B[1],O=(0,i.useRef)(new y.BrowserMultiFormatReader);(0,i.useEffect)((function(){var e=O.current;return navigator.mediaDevices.getUserMedia({video:!0}).then((function(){return e.listVideoInputDevices()})).then((function(e){d(e),e.length>0&&f(e[0].deviceId)})).catch((function(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u043a\u0430\u043c\u0435\u0440\u0435:",e)})),function(){e.reset()}}),[]);var Z=function(){L(!1),O.current.reset(),A(null)};return(0,i.useEffect)((function(){r&&r.article&&Z(),null===r&&Z()}),[r,N]),(0,m.jsxs)("div",{className:b.container,children:[(0,m.jsx)("div",{className:b.scanBlock,children:(0,m.jsx)("video",{ref:c,className:w?b.videoArea:b.hide})}),(0,m.jsxs)("div",{className:b.buttonsBlock,children:[(0,m.jsx)("button",{className:b.button,onClick:function(){L(!0),v&&O.current.decodeFromVideoDevice(v,c.current,function(){var e=(0,g.Z)(_().mark((function e(r,c){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r)try{"H"!==(null===r||void 0===r?void 0:r.text[0])&&(t(r.text),n((0,C.BD)(r.text)))}catch(c){console.error(c),A({error:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443"})}case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},children:"Start"}),(0,m.jsx)("button",{className:b.button,onClick:Z,children:"Reset"})]}),(0,m.jsxs)("div",{className:b.scanBlock,children:[(0,m.jsx)("label",{htmlFor:"sourceSelect",children:"Change video source:"}),(0,m.jsx)("select",{ref:o,id:"sourceSelect",value:v,onChange:function(e){return f(e.target.value)},children:u.map((function(e){return(0,m.jsx)("option",{value:e.deviceId,children:e.label||"Camera ".concat(e.deviceId)},e.deviceId)}))})]})]})},A=function(e){return e.inventory.items},S=function(e){return e.inventory.isLoading},B=n(4723),w=n(3600),L=n(381),O=n(5218),Z=function(){var e,t,n=(0,k.I0)(),s=(0,k.v9)(I.K),l=(0,k.v9)(S),u=(0,k.v9)(A),d=(0,i.useState)(!1),p=(0,a.Z)(d,2),v=p[0],g=p[1],j=(0,i.useState)(!1),_=(0,a.Z)(j,2),b=_[0],y=_[1],C=(0,i.useState)(""),Z=(0,a.Z)(C,2),F=Z[0],R=Z[1],D=(0,i.useState)(),E=(0,a.Z)(D,2),M=E[0],P=E[1],U=(0,i.useState)([]),q=(0,a.Z)(U,2),z=q[0],H=q[1],V=function(){g(!v)},W=function(){var e=new Date,t=e.getDate()<10?"0"+e.getDate():e.getDate(),n=e.getMonth()<9?"0"+(e.getMonth()+1):e.getMonth()+1,r=e.getFullYear();return"".concat(t,".").concat(n,".").concat(r)};(0,i.useEffect)((function(){""!==F&&(s&&s.article&&y(!0),null===s&&y(!0))}),[s,F]),(0,i.useEffect)((function(){v||n((0,w.qL)())}),[v,n]);var K=function(e){var t,n=0,c=(0,r.Z)(e);try{for(c.s();!(t=c.n()).done;){var a=t.value;n+=Number(a.count)}}catch(o){c.e(o)}finally{c.f()}return n};return(0,m.jsxs)(m.Fragment,{children:[!v&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("button",{className:o.addButton,onClick:V,children:(0,m.jsx)(f,{fill:"transparent",fontSize:"large"})}),(0,m.jsxs)("div",{className:o.listWrapper,children:[l&&(0,m.jsx)(h,{color:"#c04545"}),!l&&u&&(0,m.jsx)("ul",{className:o.list,children:u.map((function(e,t){return(0,m.jsxs)("li",{className:o.listItem,children:[(0,m.jsx)("p",{children:e.name}),(0,m.jsxs)("p",{className:o.count,children:[K(e.items),"\u0448\u0442."]})]},t)}))})]})]}),v&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("button",{className:"".concat(o.addButton," ").concat(o.closeButton),onClick:V,children:(0,m.jsx)(x,{fill:"transparent",fontSize:"large"})}),(0,m.jsx)("div",{children:(0,m.jsx)(N,{setLastResult:R})}),s&&s.article&&(0,m.jsx)("button",{className:o.button,onClick:function(){return y(!0)},children:"Last Scan"}),(null===z||void 0===z?void 0:z.length)>0&&(0,m.jsxs)("div",{className:o.addListArea,children:[(0,m.jsx)("p",{children:W()}),(0,m.jsx)("ul",{className:o.list,children:z.map((function(e,t){return(0,m.jsxs)("li",{className:o.listItem,children:[(0,m.jsxs)("p",{children:["\u0410\u0440\u0442\u0438\u043a\u0443\u043b: ",e.article]}),(0,m.jsxs)("p",{className:o.count,children:["\u041a\u043e\u043b-\u0432\u043e: ",e.count,"\u0448\u0442."]})]},t)}))}),(0,m.jsx)("button",{className:o.button,onClick:function(){var e={name:W(),items:z};try{n((0,w.vE)(e)),g(!1)}catch(t){O.ZP.error(t)}},children:"Apply"})]}),(0,m.jsx)(L.N,{isOpen:b,close:function(){y(!1)},body:s&&s.article?(0,m.jsxs)("div",{className:o.modalArea,children:[Array.isArray(s.images)&&s.images.length>0?(0,m.jsx)("img",{className:o.modalImage,alt:"scanned product",src:s.images[0]}):(0,m.jsx)("p",{children:"No image"}),(0,m.jsx)("p",{children:"".concat((null===(e=s.name)||void 0===e?void 0:e.UA)||"\u0411\u0435\u0437 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f"," (").concat(s.article,")")}),(0,m.jsx)("p",{children:null!==(t=s.price)&&void 0!==t&&t.UAH?"".concat(s.price.UAH," \u0433\u0440\u043d."):"\u0426\u0435\u043d\u0430 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u0430"}),(0,m.jsxs)("div",{className:o.countArea,children:[(0,m.jsx)("input",{placeholder:"\u0421\u043a\u043e\u043b\u044c\u043a\u043e \u0448\u0442\u0443\u043a?",onChange:function(e){return P(e.target.value)},defaultValue:M,className:o.countInput}),(0,m.jsx)("button",{className:o.countAddBtn,onClick:function(){H((function(e){return[].concat((0,c.Z)(e),[{article:s.article,count:M}])})),y(!1),P(),n((0,B.h)())},children:"Add"})]})]}):null===s?(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{children:"\u0422\u043e\u0432\u0430\u0440 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d!"}),(0,m.jsxs)("p",{children:["\u0428\u0442\u0440\u0438\u0445\u043a\u043e\u0434: ",F]})]}):null})]})]})},F=n(3050);function R(){return(0,m.jsx)(F.B6,{children:(0,m.jsxs)("div",{children:[(0,m.jsx)(F.ql,{children:(0,m.jsx)("title",{children:"Inventory check"})}),(0,m.jsx)(Z,{})]})})}},9654:function(e,t,n){n.d(t,{K:function(){return c},q:function(){return r}});var r=function(e){return e.products.items},c=function(e){return e.products.activeItem}}}]);
//# sourceMappingURL=938.a8bb5530.chunk.js.map