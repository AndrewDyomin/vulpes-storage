"use strict";(self.webpackChunkvulpes_storage=self.webpackChunkvulpes_storage||[]).push([[938],{381:function(e,t,n){n.d(t,{N:function(){return l}});var r=n(3439),a=n(7948),c=n.n(a),o="PopUp_modalCloseButton__m06-1",i="PopUp_menuIcon__5-11v",s=n(184),l=function(e){var t=e.isOpen,n=e.close,a=e.body;return(0,s.jsxs)(c(),{isOpen:t,onRequestClose:n,style:{overlay:{backgroundColor:"rgba(9, 9, 9, 0.75)",position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center"},content:{position:"relative",top:"auto",left:"auto",right:"auto",bottom:"auto",minWidth:"300px",maxWidth:"80%",width:"auto",maxHeight:"80%",padding:"50px 20px",borderRadius:"12px",border:"2px solid black",backgroundColor:"FFF",transition:"top 0.3s ease-in-out"}},ariaHideApp:!1,children:[(0,s.jsx)("button",{className:o,type:"button",onClick:n,children:(0,s.jsx)("svg",{className:i,children:(0,s.jsx)("use",{href:"".concat(r.Z,"#icon-close-circle")})})}),a]})}},9938:function(e,t,n){n.r(t),n.d(t,{default:function(){return F}});var r=n(7762),a=n(3433),c=n(9439),o={listWrapper:"InventoryCheckList_listWrapper__ZmVhv",addButton:"InventoryCheckList_addButton__GF6NK",modalArea:"InventoryCheckList_modalArea__P1CSU",modalImage:"InventoryCheckList_modalImage__eAl2A",button:"InventoryCheckList_button__apVqB",countArea:"InventoryCheckList_countArea__B0ih7",countInput:"InventoryCheckList_countInput__dfopf",countAddBtn:"InventoryCheckList_countAddBtn__TlZrB",addListArea:"InventoryCheckList_addListArea__p0QVr",list:"InventoryCheckList_list__J6D9u",listItem:"InventoryCheckList_listItem__UnQTL",count:"InventoryCheckList_count__So13G"},i=n(2791),s={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function l(e){if("number"===typeof e)return{value:e,unit:"px"};var t,n=(e.match(/^[0-9.]*/)||"").toString();t=n.includes(".")?parseFloat(n):parseInt(n,10);var r=(e.match(/[^0-9]*$/)||"").toString();return s[r]?{value:t,unit:r}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(t,"px.")),{value:t,unit:"px"})}var u=function(){return u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},u.apply(this,arguments)},d=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},p=function(e,t,n){var r="react-spinners-".concat(e,"-").concat(n);if("undefined"==typeof window||!window.document)return r;var a=document.createElement("style");document.head.appendChild(a);var c=a.sheet,o="\n    @keyframes ".concat(r," {\n      ").concat(t,"\n    }\n  ");return c&&c.insertRule(o,0),r}("ClockLoader","100% { transform: rotate(360deg) }","rotate");var h=function(e){var t=e.loading,n=void 0===t||t,r=e.color,a=void 0===r?"#000000":r,c=e.speedMultiplier,o=void 0===c?1:c,s=e.cssOverride,h=void 0===s?{}:s,v=e.size,f=void 0===v?50:v,m=d(e,["loading","color","speedMultiplier","cssOverride","size"]),x=l(f),g=x.value,j=x.unit,_=u({display:"inherit",position:"relative",width:"".concat(g).concat(j),height:"".concat(g).concat(j),backgroundColor:"transparent",boxShadow:"inset 0px 0px 0px 2px ".concat(a),borderRadius:"50%"},h),b={position:"absolute",backgroundColor:a,width:"".concat(g/3,"px"),height:"2px",top:"".concat(g/2-1,"px"),left:"".concat(g/2-1,"px"),transformOrigin:"1px 1px",animation:"".concat(p," ").concat(8/o,"s linear infinite")},y={position:"absolute",backgroundColor:a,width:"".concat(g/2.4,"px"),height:"2px",top:"".concat(g/2-1,"px"),left:"".concat(g/2-1,"px"),transformOrigin:"1px 1px",animation:"".concat(p," ").concat(2/o,"s linear infinite")};return n?i.createElement("span",u({style:_},m),i.createElement("span",{style:y}),i.createElement("span",{style:b})):null},v=n(6811),f=n(184),m=(0,v.Z)((0,f.jsx)("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"AddCircleOutline"),x=(0,v.Z)((0,f.jsx)("path",{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"HighlightOff"),g=n(5861),j=n(4687),_=n.n(j),b={container:"BarcodeScanner_container__zdOxt",videoArea:"BarcodeScanner_videoArea__AA2r4",hide:"BarcodeScanner_hide__qqbBN",modalArea:"BarcodeScanner_modalArea__9PFQN",modalImage:"BarcodeScanner_modalImage__0uUA6",button:"BarcodeScanner_button__kNses"},y=n(1089),C=n(5612),I=n(4420),k=n(9654),N=(0,i.forwardRef)((function(e,t){var n=e.setLastResult,r=(0,I.I0)(),a=(0,I.v9)(k.K),o=(0,i.useRef)(null),s=(0,i.useRef)(null),l=(0,i.useState)([]),u=(0,c.Z)(l,2),d=u[0],p=u[1],h=(0,i.useState)(""),v=(0,c.Z)(h,2),m=v[0],x=v[1],j=(0,i.useState)(null),N=(0,c.Z)(j,2),S=N[0],A=N[1],B=(0,i.useState)(!1),w=(0,c.Z)(B,2),L=w[0],O=w[1],Z=(0,i.useRef)(new y.BrowserMultiFormatReader);(0,i.useEffect)((function(){var e=Z.current;return navigator.mediaDevices.getUserMedia({video:!0}).then((function(){return e.listVideoInputDevices()})).then((function(e){p(e),e.length>0&&x(e[0].deviceId)})).catch((function(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u043a\u0430\u043c\u0435\u0440\u0435:",e)})),function(){e.reset()}}),[]),(0,i.useImperativeHandle)(t,(function(){return{startScan:R,stopScan:F}}));var R=function(){O(!0),m&&Z.current.decodeFromVideoDevice(m,o.current,function(){var e=(0,g.Z)(_().mark((function e(t,a){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t)try{"H"!==(null===t||void 0===t?void 0:t.text[0])&&(n(t.text),r((0,C.BD)(t.text)))}catch(a){console.error(a),A({error:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443"})}case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},F=function(){O(!1),Z.current.reset(),A(null)};return(0,i.useEffect)((function(){a&&a.article&&F(),null===a&&F()}),[a,S]),(0,f.jsxs)("div",{className:b.container,children:[(0,f.jsx)("div",{className:b.scanBlock,children:(0,f.jsx)("video",{ref:o,className:L?b.videoArea:b.hide})}),(0,f.jsxs)("div",{className:b.buttonsBlock,children:[(0,f.jsx)("button",{className:b.button,onClick:R,children:"Start"}),(0,f.jsx)("button",{className:b.button,onClick:F,children:"Reset"})]}),(0,f.jsxs)("div",{className:b.scanBlock,children:[(0,f.jsx)("label",{htmlFor:"sourceSelect",children:"Change video source:"}),(0,f.jsx)("select",{ref:s,id:"sourceSelect",value:m,onChange:function(e){return x(e.target.value)},children:d.map((function(e){return(0,f.jsx)("option",{value:e.deviceId,children:e.label||"Camera ".concat(e.deviceId)},e.deviceId)}))})]})]})})),S=function(e){return e.inventory.items},A=function(e){return e.inventory.isLoading},B=n(4723),w=n(3600),L=n(381),O=n(5218),Z=function(){var e,t,n=(0,I.I0)(),s=(0,I.v9)(k.K),l=(0,I.v9)(A),u=(0,I.v9)(S),d=(0,i.useRef)(),p=(0,i.useState)(!1),v=(0,c.Z)(p,2),g=v[0],j=v[1],_=(0,i.useState)(!1),b=(0,c.Z)(_,2),y=b[0],C=b[1],Z=(0,i.useState)(""),R=(0,c.Z)(Z,2),F=R[0],D=R[1],E=(0,i.useState)(),M=(0,c.Z)(E,2),P=M[0],U=M[1],H=(0,i.useState)([]),V=(0,c.Z)(H,2),q=V[0],z=V[1],W=(0,i.useState)(),K=(0,c.Z)(W,2),Q=K[0],G=K[1],T=function(){j(!g)},J=function(){var e;z((function(e){return[].concat((0,a.Z)(e),[{article:s.article,count:P}])})),C(!1),U(),n((0,B.h)()),null===(e=d.current)||void 0===e||e.startScan()},Y=function(){var e=new Date,t=e.getDate()<10?"0"+e.getDate():e.getDate(),n=e.getMonth()<9?"0"+(e.getMonth()+1):e.getMonth()+1,r=e.getFullYear();return"".concat(t,".").concat(n,".").concat(r)},$=function(e){var t,n=0,a=(0,r.Z)(e);try{for(a.s();!(t=a.n()).done;){var c=t.value;n+=Number(c.count)}}catch(o){a.e(o)}finally{a.f()}return n};return(0,i.useEffect)((function(){""!==F&&(s&&s.article&&C(!0),null===s&&C(!0))}),[s,F]),(0,i.useEffect)((function(){g||n((0,w.qL)())}),[g,n]),(0,f.jsxs)(f.Fragment,{children:[!g&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("button",{className:o.addButton,onClick:T,children:(0,f.jsx)(m,{fill:"transparent",fontSize:"large"})}),(0,f.jsxs)("div",{className:o.listWrapper,children:[l&&(0,f.jsx)(h,{color:"#c04545"}),!l&&u&&(0,f.jsx)("ul",{className:o.list,children:u.map((function(e,t){return(0,f.jsxs)("li",{className:o.listItem,children:[(0,f.jsx)("p",{children:e.name}),(0,f.jsxs)("p",{className:o.count,children:[$(e.items),"\u0448\u0442."]})]},t)}))})]})]}),g&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("button",{className:"".concat(o.addButton," ").concat(o.closeButton),onClick:T,children:(0,f.jsx)(x,{fill:"transparent",fontSize:"large"})}),(0,f.jsx)("div",{children:(0,f.jsx)(N,{setLastResult:D,ref:d})}),s&&s.article&&(0,f.jsx)("button",{className:o.button,onClick:function(){return C(!0)},children:"Last Scan"}),(null===q||void 0===q?void 0:q.length)>0&&(0,f.jsxs)("div",{className:o.addListArea,children:[(0,f.jsx)("p",{children:Y()}),(0,f.jsx)("ul",{className:o.list,children:q.map((function(e,t){return(0,f.jsxs)("li",{className:o.listItem,children:[(0,f.jsxs)("p",{children:["\u0410\u0440\u0442\u0438\u043a\u0443\u043b: ",e.article]}),(0,f.jsxs)("p",{className:o.count,children:["\u041a\u043e\u043b-\u0432\u043e: ",e.count,"\u0448\u0442."]})]},t)}))}),(0,f.jsx)("button",{className:o.button,onClick:function(){var e={name:Y(),items:q};try{n((0,w.vE)(e)),j(!1),z([])}catch(t){O.ZP.error(t)}},children:"Apply"})]}),(0,f.jsx)(L.N,{isOpen:y,close:function(){C(!1)},body:s&&s.article?(0,f.jsxs)("div",{className:o.modalArea,children:[Array.isArray(s.images)&&s.images.length>0?(0,f.jsx)("img",{className:o.modalImage,alt:"scanned product",src:s.images[0]}):(0,f.jsx)("p",{children:"No image"}),(0,f.jsx)("p",{children:"".concat((null===(e=s.name)||void 0===e?void 0:e.UA)||"\u0411\u0435\u0437 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f"," (").concat(s.article,")")}),(0,f.jsx)("p",{children:null!==(t=s.price)&&void 0!==t&&t.UAH?"".concat(s.price.UAH," \u0433\u0440\u043d."):"\u0426\u0435\u043d\u0430 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u0430"}),(0,f.jsxs)("div",{className:o.countArea,children:[(0,f.jsx)("input",{placeholder:"\u0421\u043a\u043e\u043b\u044c\u043a\u043e \u0448\u0442\u0443\u043a?",onChange:function(e){return U(e.target.value)},defaultValue:P,className:o.countInput}),(0,f.jsx)("button",{className:o.countAddBtn,onClick:J,children:"Add"})]})]}):null===s?(0,f.jsxs)("div",{children:[(0,f.jsx)("p",{children:"\u0422\u043e\u0432\u0430\u0440 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d!"}),(0,f.jsxs)("p",{children:["\u0428\u0442\u0440\u0438\u0445\u043a\u043e\u0434: ",F]}),(0,f.jsxs)("div",{className:o.countArea,children:[(0,f.jsx)("input",{placeholder:"\u0410\u0440\u0442\u0438\u043a\u0443\u043b",onChange:function(e){return G(e.target.value)},defaultValue:Q,className:o.countInput}),(0,f.jsx)("input",{placeholder:"\u0421\u043a\u043e\u043b\u044c\u043a\u043e \u0448\u0442\u0443\u043a?",onChange:function(e){return U(e.target.value)},defaultValue:P,className:o.countInput}),(0,f.jsx)("button",{className:o.countAddBtn,onClick:J,children:"Add"})]})]}):null})]})]})},R=n(3050);function F(){return(0,f.jsx)(R.B6,{children:(0,f.jsxs)("div",{children:[(0,f.jsx)(R.ql,{children:(0,f.jsx)("title",{children:"Inventory check"})}),(0,f.jsx)(Z,{})]})})}},9654:function(e,t,n){n.d(t,{K:function(){return a},q:function(){return r}});var r=function(e){return e.products.items},a=function(e){return e.products.activeItem}}}]);
//# sourceMappingURL=938.d846db22.chunk.js.map