"use strict";(self.webpackChunkvulpes_storage=self.webpackChunkvulpes_storage||[]).push([[979],{1448:function(n,e,t){t.d(e,{m:function(){return f}});var c=t(5861),r=t(9439),a=t(4687),o=t.n(a),i=t(2791),s={container:"BarcodeScanner_container__zdOxt",scanBlock:"BarcodeScanner_scanBlock__MR5A0",videoArea:"BarcodeScanner_videoArea__AA2r4",hide:"BarcodeScanner_hide__qqbBN",modalArea:"BarcodeScanner_modalArea__9PFQN",modalImage:"BarcodeScanner_modalImage__0uUA6",button:"BarcodeScanner_button__kNses"},l=t(1089),u=t(5612),d=t(4420),p=t(9654),h=t(9230),v=t(184),f=(0,i.forwardRef)((function(n,e){var t=n.setLastResult,a=(0,h.$G)().t,f=(0,d.I0)(),m=(0,d.v9)(p.K),x=(0,i.useRef)(null),_=(0,i.useRef)(null),j=(0,i.useState)([]),g=(0,r.Z)(j,2),b=g[0],y=g[1],k=(0,i.useState)(""),C=(0,r.Z)(k,2),N=C[0],I=C[1],A=(0,i.useState)(null),S=(0,r.Z)(A,2),B=S[0],L=S[1],Z=(0,i.useState)(!1),w=(0,r.Z)(Z,2),O=w[0],F=w[1],R=(0,i.useRef)(new l.BrowserMultiFormatReader);(0,i.useEffect)((function(){var n=R.current;return navigator.mediaDevices.getUserMedia({video:!0}).then((function(){return n.listVideoInputDevices()})).then((function(n){y(n),n.length>0&&I(n[0].deviceId)})).catch((function(n){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u043a\u0430\u043c\u0435\u0440\u0435:",n)})),function(){n.reset()}}),[]),(0,i.useImperativeHandle)(e,(function(){return{startScan:M,stopScan:D}}));var M=function(){F(!0),N&&R.current.decodeFromVideoDevice(N,x.current,function(){var n=(0,c.Z)(o().mark((function n(e,c){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e)try{"H"!==(null===e||void 0===e?void 0:e.text[0])&&(t(e.text),f((0,u.BD)(e.text)))}catch(c){console.error(c),L({error:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443"})}case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())},D=function(){F(!1),R.current.reset(),L(null)};return(0,i.useEffect)((function(){m&&m.article&&D(),null===m&&D()}),[m,B]),(0,v.jsxs)("div",{className:s.container,children:[(0,v.jsx)("div",{className:s.scanBlock,children:(0,v.jsx)("video",{ref:x,className:O?s.videoArea:s.hide})}),(0,v.jsxs)("div",{className:s.buttonsBlock,children:[(0,v.jsx)("button",{className:s.button,onClick:M,children:a("start")}),(0,v.jsx)("button",{className:s.button,onClick:D,children:a("reset")})]}),(0,v.jsxs)("div",{className:s.scanBlock,children:[(0,v.jsxs)("label",{htmlFor:"sourceSelect",children:[a("change video source"),":"]}),(0,v.jsx)("select",{ref:_,id:"sourceSelect",value:N,onChange:function(n){return I(n.target.value)},children:b.map((function(n){return(0,v.jsx)("option",{value:n.deviceId,children:n.label||"Camera ".concat(n.deviceId)},n.deviceId)}))})]})]})}))},381:function(n,e,t){t.d(e,{N:function(){return l}});var c=t(3439),r=t(7948),a=t.n(r),o="PopUp_modalCloseButton__m06-1",i="PopUp_menuIcon__5-11v",s=t(184),l=function(n){var e=n.isOpen,t=n.close,r=n.body;return(0,s.jsxs)(a(),{isOpen:e,onRequestClose:t,style:{overlay:{backgroundColor:"rgba(9, 9, 9, 0.75)",position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center"},content:{position:"relative",top:"auto",left:"auto",right:"auto",bottom:"auto",minWidth:"300px",maxWidth:"80%",width:"auto",maxHeight:"80%",padding:"50px 20px",borderRadius:"12px",border:"2px solid black",backgroundColor:"FFF",transition:"top 0.3s ease-in-out"}},ariaHideApp:!1,children:[(0,s.jsx)("button",{className:o,type:"button",onClick:t,children:(0,s.jsx)("svg",{className:i,children:(0,s.jsx)("use",{href:"".concat(c.Z,"#icon-close-circle")})})}),r]})}},2979:function(n,e,t){t.r(e),t.d(e,{default:function(){return N}});var c=t(7762),r=t(3433),a=t(9439),o={listWrapper:"InventoryCheckList_listWrapper__ZmVhv",controlArea:"InventoryCheckList_controlArea__qzRVJ",addButton:"InventoryCheckList_addButton__GF6NK",addArtBtn:"InventoryCheckList_addArtBtn__jDfjx",modalArea:"InventoryCheckList_modalArea__P1CSU",modalImage:"InventoryCheckList_modalImage__eAl2A",button:"InventoryCheckList_button__apVqB",countArea:"InventoryCheckList_countArea__B0ih7",countInput:"InventoryCheckList_countInput__dfopf",countAddBtn:"InventoryCheckList_countAddBtn__TlZrB",addListArea:"InventoryCheckList_addListArea__p0QVr",list:"InventoryCheckList_list__J6D9u",listItem:"InventoryCheckList_listItem__UnQTL",link:"InventoryCheckList_link__MUYxS",count:"InventoryCheckList_count__So13G",notFoundArea:"InventoryCheckList_notFoundArea__XNR+b"},i=t(4270),s=t(9536),l=t(6811),u=t(184),d=(0,l.Z)((0,u.jsx)("path",{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"HighlightOff"),p=t(2791),h=t(1448),v=t(9654),f=t(9567),m=t(4723),x=t(3600),_=t(4420),j=t(381),g=t(5218),b=t(1087),y=t(9230),k=function(){var n,e,t=(0,y.$G)().t,l=(0,_.I0)(),k=(0,_.v9)(v.K),C=(0,_.v9)(f.N),N=(0,_.v9)(f.W),I=(0,p.useRef)(),A=(0,p.useState)(!1),S=(0,a.Z)(A,2),B=S[0],L=S[1],Z=(0,p.useState)(!1),w=(0,a.Z)(Z,2),O=w[0],F=w[1],R=(0,p.useState)(""),M=(0,a.Z)(R,2),D=M[0],U=M[1],E=(0,p.useState)(),z=(0,a.Z)(E,2),P=z[0],V=z[1],q=(0,p.useState)([]),H=(0,a.Z)(q,2),W=H[0],G=H[1],K=(0,p.useState)(),Q=(0,a.Z)(K,2),$=Q[0],J=Q[1],T=(0,p.useState)(),Y=(0,a.Z)(T,2),X=Y[0],nn=Y[1],en=function(){L(!B)},tn=function(){F(!1),nn(!1)},cn=function(){var n;G((function(n){return[].concat((0,r.Z)(n),[{article:$||k.article,count:P}])})),tn(),J(),V(),l((0,m.h)()),null===(n=I.current)||void 0===n||n.startScan()},rn=function(){for(var n=new Date,e=n.getDate()<10?"0"+n.getDate():n.getDate(),t=n.getMonth()<9?"0"+(n.getMonth()+1):n.getMonth()+1,c=n.getFullYear(),r="".concat(e,".").concat(t,".").concat(c),a=0,o=r,i=N.map((function(n){return n.name}));i.includes(o);)a+=1,o="".concat(r," (").concat(a,")");return o},an=function(n){var e,t=0,r=(0,c.Z)(n);try{for(r.s();!(e=r.n()).done;){var a=e.value;t+=Number(a.count)}}catch(o){r.e(o)}finally{r.f()}return t};return(0,p.useEffect)((function(){""!==D&&(k&&k.article&&F(!0),null===k&&F(!0))}),[k,D]),(0,p.useEffect)((function(){B||l((0,x.qL)())}),[B,l]),(0,u.jsxs)(u.Fragment,{children:[!B&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("button",{className:o.addButton,onClick:en,children:(0,u.jsx)(s.Z,{fill:"transparent",fontSize:"large"})}),(0,u.jsxs)("div",{className:o.listWrapper,children:[C&&(0,u.jsx)(i.Z,{color:"#c04545"}),!C&&N&&(0,u.jsx)("ul",{className:o.list,children:N.map((function(n,e){return(0,u.jsx)("li",{className:o.listItem,children:(0,u.jsxs)(b.rU,{className:o.link,to:"/inventory-check/".concat(n._id),children:[(0,u.jsx)("p",{children:n.name}),(0,u.jsxs)("p",{className:o.count,children:[an(n.items),t("pcs"),"."]})]})},e)}))})]})]}),B&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("button",{className:"".concat(o.addButton," ").concat(o.closeButton),onClick:en,children:(0,u.jsx)(d,{fill:"transparent",fontSize:"large"})}),(0,u.jsxs)("div",{className:o.controlArea,children:[(0,u.jsx)(h.m,{setLastResult:U,ref:I}),(0,u.jsx)("button",{className:"".concat(o.addButton," ").concat(o.addArtBtn),onClick:function(){return nn(!0)},children:(0,u.jsx)(s.Z,{fill:"transparent",fontSize:"large"})})]}),k&&k.article&&(0,u.jsx)("button",{className:o.button,onClick:function(){return F(!0)},children:t("last scan")}),(null===W||void 0===W?void 0:W.length)>0&&(0,u.jsxs)("div",{className:o.addListArea,children:[(0,u.jsx)("p",{children:rn()}),(0,u.jsx)("ul",{className:o.list,children:W.map((function(n,e){return(0,u.jsxs)("li",{className:o.listItem,children:[(0,u.jsxs)("p",{children:[t("article"),": ",n.article]}),(0,u.jsxs)("p",{className:o.count,children:[t("count"),": ",n.count,t("pcs"),"."]})]},e)}))}),(0,u.jsx)("button",{className:o.button,onClick:function(){var n={name:rn(),items:W};try{l((0,x.vE)(n)),L(!1),G([])}catch(e){g.ZP.error(e)}},children:t("save")})]}),(0,u.jsx)(j.N,{isOpen:O,close:tn,body:k&&k.article?(0,u.jsxs)("div",{className:o.modalArea,children:[Array.isArray(k.images)&&k.images.length>0?(0,u.jsx)("img",{className:o.modalImage,alt:"scanned product",src:k.images[0]}):(0,u.jsx)("p",{children:"No image"}),(0,u.jsx)("p",{children:"".concat((null===(n=k.name)||void 0===n?void 0:n.UA)||t("no name")," (").concat(k.article,")")}),(0,u.jsx)("p",{children:null!==(e=k.price)&&void 0!==e&&e.UAH?"".concat(k.price.UAH," \u0433\u0440\u043d."):"\u0426\u0435\u043d\u0430 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u0430"}),(0,u.jsxs)("div",{className:o.countArea,children:[(0,u.jsx)("input",{placeholder:t("count"),onChange:function(n){return V(n.target.value)},defaultValue:P,className:o.countInput}),(0,u.jsx)("button",{className:o.countAddBtn,onClick:cn,children:t("add")})]})]}):null===k?(0,u.jsxs)("div",{children:[(0,u.jsxs)("p",{children:[t("product not found"),"!"]}),(0,u.jsxs)("p",{children:["barcode",": ",D]}),(0,u.jsxs)("div",{className:o.countArea,children:[(0,u.jsx)("input",{placeholder:t("article"),onChange:function(n){return J(n.target.value)},defaultValue:$,className:o.countInput}),(0,u.jsx)("input",{placeholder:t("count"),onChange:function(n){return V(n.target.value)},defaultValue:P,className:o.countInput}),(0,u.jsx)("button",{className:o.countAddBtn,onClick:cn,children:t("add")})]})]}):null}),(0,u.jsx)(j.N,{isOpen:X,close:tn,body:(0,u.jsxs)("div",{className:"".concat(o.countArea," ").concat(o.notFoundArea),children:[(0,u.jsx)("input",{placeholder:t("article"),onChange:function(n){return J(n.target.value)},className:o.countInput}),(0,u.jsx)("input",{placeholder:t("count"),onChange:function(n){return V(n.target.value)},type:"number",className:o.countInput}),(0,u.jsx)("button",{className:o.countAddBtn,onClick:cn,children:t("add")})]})})]})]})},C=t(3050);function N(){return(0,u.jsx)(C.B6,{children:(0,u.jsxs)("div",{children:[(0,u.jsx)(C.ql,{children:(0,u.jsx)("title",{children:"Inventory check"})}),(0,u.jsx)(k,{})]})})}},9567:function(n,e,t){t.d(e,{N:function(){return r},W:function(){return c}});var c=function(n){return n.inventory.items},r=function(n){return n.inventory.isLoading}},9654:function(n,e,t){t.d(e,{K:function(){return r},q:function(){return c}});var c=function(n){return n.products.items},r=function(n){return n.products.activeItem}},4270:function(n,e,t){t.d(e,{Z:function(){return l}});var c=t(2791),r={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function a(n){if("number"===typeof n)return{value:n,unit:"px"};var e,t=(n.match(/^[0-9.]*/)||"").toString();e=t.includes(".")?parseFloat(t):parseInt(t,10);var c=(n.match(/[^0-9]*$/)||"").toString();return r[c]?{value:e,unit:c}:(console.warn("React Spinners: ".concat(n," is not a valid css value. Defaulting to ").concat(e,"px.")),{value:e,unit:"px"})}var o=function(){return o=Object.assign||function(n){for(var e,t=1,c=arguments.length;t<c;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},o.apply(this,arguments)},i=function(n,e){var t={};for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&e.indexOf(c)<0&&(t[c]=n[c]);if(null!=n&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(c=Object.getOwnPropertySymbols(n);r<c.length;r++)e.indexOf(c[r])<0&&Object.prototype.propertyIsEnumerable.call(n,c[r])&&(t[c[r]]=n[c[r]])}return t},s=function(n,e,t){var c="react-spinners-".concat(n,"-").concat(t);if("undefined"==typeof window||!window.document)return c;var r=document.createElement("style");document.head.appendChild(r);var a=r.sheet,o="\n    @keyframes ".concat(c," {\n      ").concat(e,"\n    }\n  ");return a&&a.insertRule(o,0),c}("ClockLoader","100% { transform: rotate(360deg) }","rotate");var l=function(n){var e=n.loading,t=void 0===e||e,r=n.color,l=void 0===r?"#000000":r,u=n.speedMultiplier,d=void 0===u?1:u,p=n.cssOverride,h=void 0===p?{}:p,v=n.size,f=void 0===v?50:v,m=i(n,["loading","color","speedMultiplier","cssOverride","size"]),x=a(f),_=x.value,j=x.unit,g=o({display:"inherit",position:"relative",width:"".concat(_).concat(j),height:"".concat(_).concat(j),backgroundColor:"transparent",boxShadow:"inset 0px 0px 0px 2px ".concat(l),borderRadius:"50%"},h),b={position:"absolute",backgroundColor:l,width:"".concat(_/3,"px"),height:"2px",top:"".concat(_/2-1,"px"),left:"".concat(_/2-1,"px"),transformOrigin:"1px 1px",animation:"".concat(s," ").concat(8/d,"s linear infinite")},y={position:"absolute",backgroundColor:l,width:"".concat(_/2.4,"px"),height:"2px",top:"".concat(_/2-1,"px"),left:"".concat(_/2-1,"px"),transformOrigin:"1px 1px",animation:"".concat(s," ").concat(2/d,"s linear infinite")};return t?c.createElement("span",o({style:g},m),c.createElement("span",{style:y}),c.createElement("span",{style:b})):null}},9536:function(n,e,t){var c=t(6811),r=t(184);e.Z=(0,c.Z)((0,r.jsx)("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"AddCircleOutline")}}]);
//# sourceMappingURL=979.ca3bf376.chunk.js.map