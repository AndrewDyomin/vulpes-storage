"use strict";(self.webpackChunkvulpes_storage=self.webpackChunkvulpes_storage||[]).push([[991],{381:function(e,t,n){n.d(t,{N:function(){return l}});var r=n(3439),c=n(7948),a=n.n(c),o="PopUp_modalCloseButton__m06-1",i="PopUp_menuIcon__5-11v",s=n(184),l=function(e){var t=e.isOpen,n=e.close,c=e.body;return(0,s.jsxs)(a(),{isOpen:t,onRequestClose:n,style:{overlay:{backgroundColor:"rgba(9, 9, 9, 0.75)",position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center"},content:{position:"relative",top:"auto",left:"auto",right:"auto",bottom:"auto",minWidth:"300px",maxWidth:"80%",width:"auto",maxHeight:"80%",padding:"50px 20px",borderRadius:"12px",border:"2px solid black",backgroundColor:"FFF",transition:"top 0.3s ease-in-out"}},ariaHideApp:!1,children:[(0,s.jsx)("button",{className:o,type:"button",onClick:n,children:(0,s.jsx)("svg",{className:i,children:(0,s.jsx)("use",{href:"".concat(r.Z,"#icon-close-circle")})})}),c]})}},9991:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var r=n(7762),c=n(3433),a=n(9439),o={listWrapper:"InventoryCheckList_listWrapper__ZmVhv",addButton:"InventoryCheckList_addButton__GF6NK",modalArea:"InventoryCheckList_modalArea__P1CSU",modalImage:"InventoryCheckList_modalImage__eAl2A",button:"InventoryCheckList_button__apVqB",countArea:"InventoryCheckList_countArea__B0ih7",countInput:"InventoryCheckList_countInput__dfopf",countAddBtn:"InventoryCheckList_countAddBtn__TlZrB",addListArea:"InventoryCheckList_addListArea__p0QVr",list:"InventoryCheckList_list__J6D9u",listItem:"InventoryCheckList_listItem__UnQTL",link:"InventoryCheckList_link__MUYxS",count:"InventoryCheckList_count__So13G"},i=n(4270),s=n(9536),l=n(6811),u=n(184),d=(0,l.Z)((0,u.jsx)("path",{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"HighlightOff"),p=n(2791),h=n(5861),v=n(4687),f=n.n(v),m={container:"BarcodeScanner_container__zdOxt",videoArea:"BarcodeScanner_videoArea__AA2r4",hide:"BarcodeScanner_hide__qqbBN",modalArea:"BarcodeScanner_modalArea__9PFQN",modalImage:"BarcodeScanner_modalImage__0uUA6",button:"BarcodeScanner_button__kNses"},x=n(1089),g=n(5612),j=n(4420),_=n(9654),b=(0,p.forwardRef)((function(e,t){var n=e.setLastResult,r=(0,j.I0)(),c=(0,j.v9)(_.K),o=(0,p.useRef)(null),i=(0,p.useRef)(null),s=(0,p.useState)([]),l=(0,a.Z)(s,2),d=l[0],v=l[1],b=(0,p.useState)(""),y=(0,a.Z)(b,2),k=y[0],C=y[1],I=(0,p.useState)(null),N=(0,a.Z)(I,2),S=N[0],A=N[1],B=(0,p.useState)(!1),w=(0,a.Z)(B,2),L=w[0],Z=w[1],O=(0,p.useRef)(new x.BrowserMultiFormatReader);(0,p.useEffect)((function(){var e=O.current;return navigator.mediaDevices.getUserMedia({video:!0}).then((function(){return e.listVideoInputDevices()})).then((function(e){v(e),e.length>0&&C(e[0].deviceId)})).catch((function(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u043a\u0430\u043c\u0435\u0440\u0435:",e)})),function(){e.reset()}}),[]),(0,p.useImperativeHandle)(t,(function(){return{startScan:R,stopScan:F}}));var R=function(){Z(!0),k&&O.current.decodeFromVideoDevice(k,o.current,function(){var e=(0,h.Z)(f().mark((function e(t,c){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t)try{"H"!==(null===t||void 0===t?void 0:t.text[0])&&(n(t.text),r((0,g.BD)(t.text)))}catch(c){console.error(c),A({error:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443"})}case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},F=function(){Z(!1),O.current.reset(),A(null)};return(0,p.useEffect)((function(){c&&c.article&&F(),null===c&&F()}),[c,S]),(0,u.jsxs)("div",{className:m.container,children:[(0,u.jsx)("div",{className:m.scanBlock,children:(0,u.jsx)("video",{ref:o,className:L?m.videoArea:m.hide})}),(0,u.jsxs)("div",{className:m.buttonsBlock,children:[(0,u.jsx)("button",{className:m.button,onClick:R,children:"Start"}),(0,u.jsx)("button",{className:m.button,onClick:F,children:"Reset"})]}),(0,u.jsxs)("div",{className:m.scanBlock,children:[(0,u.jsx)("label",{htmlFor:"sourceSelect",children:"Change video source:"}),(0,u.jsx)("select",{ref:i,id:"sourceSelect",value:k,onChange:function(e){return C(e.target.value)},children:d.map((function(e){return(0,u.jsx)("option",{value:e.deviceId,children:e.label||"Camera ".concat(e.deviceId)},e.deviceId)}))})]})]})})),y=n(9567),k=n(4723),C=n(3600),I=n(381),N=n(5218),S=n(1087),A=function(){var e,t,n=(0,j.I0)(),l=(0,j.v9)(_.K),h=(0,j.v9)(y.N),v=(0,j.v9)(y.W),f=(0,p.useRef)(),m=(0,p.useState)(!1),x=(0,a.Z)(m,2),g=x[0],A=x[1],B=(0,p.useState)(!1),w=(0,a.Z)(B,2),L=w[0],Z=w[1],O=(0,p.useState)(""),R=(0,a.Z)(O,2),F=R[0],M=R[1],U=(0,p.useState)(),D=(0,a.Z)(U,2),E=D[0],P=D[1],H=(0,p.useState)([]),V=(0,a.Z)(H,2),q=V[0],z=V[1],W=(0,p.useState)(),K=(0,a.Z)(W,2),Q=K[0],G=K[1],T=function(){A(!g)},Y=function(){var e;z((function(e){return[].concat((0,c.Z)(e),[{article:Q||l.article,count:E}])})),Z(!1),G(),P(),n((0,k.h)()),null===(e=f.current)||void 0===e||e.startScan()},J=function(){var e=new Date,t=e.getDate()<10?"0"+e.getDate():e.getDate(),n=e.getMonth()<9?"0"+(e.getMonth()+1):e.getMonth()+1,r=e.getFullYear();return"".concat(t,".").concat(n,".").concat(r)},$=function(e){var t,n=0,c=(0,r.Z)(e);try{for(c.s();!(t=c.n()).done;){var a=t.value;n+=Number(a.count)}}catch(o){c.e(o)}finally{c.f()}return n};return(0,p.useEffect)((function(){""!==F&&(l&&l.article&&Z(!0),null===l&&Z(!0))}),[l,F]),(0,p.useEffect)((function(){g||n((0,C.qL)())}),[g,n]),(0,u.jsxs)(u.Fragment,{children:[!g&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("button",{className:o.addButton,onClick:T,children:(0,u.jsx)(s.Z,{fill:"transparent",fontSize:"large"})}),(0,u.jsxs)("div",{className:o.listWrapper,children:[h&&(0,u.jsx)(i.Z,{color:"#c04545"}),!h&&v&&(0,u.jsx)("ul",{className:o.list,children:v.map((function(e,t){return(0,u.jsx)("li",{className:o.listItem,children:(0,u.jsxs)(S.rU,{className:o.link,to:"/inventory-check/".concat(e._id),children:[(0,u.jsx)("p",{children:e.name}),(0,u.jsxs)("p",{className:o.count,children:[$(e.items),"\u0448\u0442."]})]})},t)}))})]})]}),g&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("button",{className:"".concat(o.addButton," ").concat(o.closeButton),onClick:T,children:(0,u.jsx)(d,{fill:"transparent",fontSize:"large"})}),(0,u.jsx)("div",{children:(0,u.jsx)(b,{setLastResult:M,ref:f})}),l&&l.article&&(0,u.jsx)("button",{className:o.button,onClick:function(){return Z(!0)},children:"Last Scan"}),(null===q||void 0===q?void 0:q.length)>0&&(0,u.jsxs)("div",{className:o.addListArea,children:[(0,u.jsx)("p",{children:J()}),(0,u.jsx)("ul",{className:o.list,children:q.map((function(e,t){return(0,u.jsxs)("li",{className:o.listItem,children:[(0,u.jsxs)("p",{children:["\u0410\u0440\u0442\u0438\u043a\u0443\u043b: ",e.article]}),(0,u.jsxs)("p",{className:o.count,children:["\u041a\u043e\u043b-\u0432\u043e: ",e.count,"\u0448\u0442."]})]},t)}))}),(0,u.jsx)("button",{className:o.button,onClick:function(){var e={name:J(),items:q};try{n((0,C.vE)(e)),A(!1),z([])}catch(t){N.ZP.error(t)}},children:"Apply"})]}),(0,u.jsx)(I.N,{isOpen:L,close:function(){Z(!1)},body:l&&l.article?(0,u.jsxs)("div",{className:o.modalArea,children:[Array.isArray(l.images)&&l.images.length>0?(0,u.jsx)("img",{className:o.modalImage,alt:"scanned product",src:l.images[0]}):(0,u.jsx)("p",{children:"No image"}),(0,u.jsx)("p",{children:"".concat((null===(e=l.name)||void 0===e?void 0:e.UA)||"\u0411\u0435\u0437 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f"," (").concat(l.article,")")}),(0,u.jsx)("p",{children:null!==(t=l.price)&&void 0!==t&&t.UAH?"".concat(l.price.UAH," \u0433\u0440\u043d."):"\u0426\u0435\u043d\u0430 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u0430"}),(0,u.jsxs)("div",{className:o.countArea,children:[(0,u.jsx)("input",{placeholder:"\u0421\u043a\u043e\u043b\u044c\u043a\u043e \u0448\u0442\u0443\u043a?",onChange:function(e){return P(e.target.value)},defaultValue:E,className:o.countInput}),(0,u.jsx)("button",{className:o.countAddBtn,onClick:Y,children:"Add"})]})]}):null===l?(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{children:"\u0422\u043e\u0432\u0430\u0440 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d!"}),(0,u.jsxs)("p",{children:["\u0428\u0442\u0440\u0438\u0445\u043a\u043e\u0434: ",F]}),(0,u.jsxs)("div",{className:o.countArea,children:[(0,u.jsx)("input",{placeholder:"\u0410\u0440\u0442\u0438\u043a\u0443\u043b",onChange:function(e){return G(e.target.value)},defaultValue:Q,className:o.countInput}),(0,u.jsx)("input",{placeholder:"\u0421\u043a\u043e\u043b\u044c\u043a\u043e \u0448\u0442\u0443\u043a?",onChange:function(e){return P(e.target.value)},defaultValue:E,className:o.countInput}),(0,u.jsx)("button",{className:o.countAddBtn,onClick:Y,children:"Add"})]})]}):null})]})]})},B=n(3050);function w(){return(0,u.jsx)(B.B6,{children:(0,u.jsxs)("div",{children:[(0,u.jsx)(B.ql,{children:(0,u.jsx)("title",{children:"Inventory check"})}),(0,u.jsx)(A,{})]})})}},9567:function(e,t,n){n.d(t,{N:function(){return c},W:function(){return r}});var r=function(e){return e.inventory.items},c=function(e){return e.inventory.isLoading}},9654:function(e,t,n){n.d(t,{K:function(){return c},q:function(){return r}});var r=function(e){return e.products.items},c=function(e){return e.products.activeItem}},4270:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(2791),c={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function a(e){if("number"===typeof e)return{value:e,unit:"px"};var t,n=(e.match(/^[0-9.]*/)||"").toString();t=n.includes(".")?parseFloat(n):parseInt(n,10);var r=(e.match(/[^0-9]*$/)||"").toString();return c[r]?{value:t,unit:r}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(t,"px.")),{value:t,unit:"px"})}var o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var c in t=arguments[n])Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c]);return e},o.apply(this,arguments)},i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var c=0;for(r=Object.getOwnPropertySymbols(e);c<r.length;c++)t.indexOf(r[c])<0&&Object.prototype.propertyIsEnumerable.call(e,r[c])&&(n[r[c]]=e[r[c]])}return n},s=function(e,t,n){var r="react-spinners-".concat(e,"-").concat(n);if("undefined"==typeof window||!window.document)return r;var c=document.createElement("style");document.head.appendChild(c);var a=c.sheet,o="\n    @keyframes ".concat(r," {\n      ").concat(t,"\n    }\n  ");return a&&a.insertRule(o,0),r}("ClockLoader","100% { transform: rotate(360deg) }","rotate");var l=function(e){var t=e.loading,n=void 0===t||t,c=e.color,l=void 0===c?"#000000":c,u=e.speedMultiplier,d=void 0===u?1:u,p=e.cssOverride,h=void 0===p?{}:p,v=e.size,f=void 0===v?50:v,m=i(e,["loading","color","speedMultiplier","cssOverride","size"]),x=a(f),g=x.value,j=x.unit,_=o({display:"inherit",position:"relative",width:"".concat(g).concat(j),height:"".concat(g).concat(j),backgroundColor:"transparent",boxShadow:"inset 0px 0px 0px 2px ".concat(l),borderRadius:"50%"},h),b={position:"absolute",backgroundColor:l,width:"".concat(g/3,"px"),height:"2px",top:"".concat(g/2-1,"px"),left:"".concat(g/2-1,"px"),transformOrigin:"1px 1px",animation:"".concat(s," ").concat(8/d,"s linear infinite")},y={position:"absolute",backgroundColor:l,width:"".concat(g/2.4,"px"),height:"2px",top:"".concat(g/2-1,"px"),left:"".concat(g/2-1,"px"),transformOrigin:"1px 1px",animation:"".concat(s," ").concat(2/d,"s linear infinite")};return n?r.createElement("span",o({style:_},m),r.createElement("span",{style:y}),r.createElement("span",{style:b})):null}},9536:function(e,t,n){var r=n(6811),c=n(184);t.Z=(0,r.Z)((0,c.jsx)("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"AddCircleOutline")}}]);
//# sourceMappingURL=991.2914a762.chunk.js.map